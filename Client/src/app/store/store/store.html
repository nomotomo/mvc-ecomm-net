<div class="store">
  <h2>Our Products</h2>

  <div class="store-layout">
<!--     Sidebar Filters-->
    <aside class="filters">
      <h3>Filter by Brand</h3>
      <button (click)="selectedBrandId.set(null); applyFilters()">All</button>
      @for (brand of brands(); track brand.id) {
        <button (click)="selectedBrandId.set(brand.id); applyFilters()">
          {{ brand.name }}
        </button>
      }

      <h3>Filter by Type</h3>
      <button (click)="selectedTypeId.set(null); applyFilters()">All</button>
      @for (type of types(); track type.id) {
        <button (click)="selectedTypeId.set(type.id); applyFilters()">
          {{ type.name }}
        </button>
      }

      <h3>Sort by</h3>
      <select (change)="sortOption.set($any($event.target).value); applyFilters()"
              [value]="sortOption()">
        <option value="default">Default</option>
        <option value="priceAsc">Price: Low to High</option>
        <option value="priceDesc">Price: High to Low</option>
      </select>

      <button class="reset-btn" (click)="resetFilters()">Reset Filters</button>
    </aside>

    <!-- Product Grid -->
    <section class="grid">
<!--      <div *ngFor="let product of products()">-->
<!--        {{ product | json }}-->
<!--      </div>-->
      @for (product of products(); track product.id) {
        <div class="card">
          <img [src]="'assets/' + product.imageFile" alt="{{ product.name }}" />
          <h3>{{ product.name }}</h3>
          <p>{{ product.brands.name }} - {{ product.types.name }}</p>
          <p class="price">‚Çπ{{ product.price }}</p>

          <div class="card-actions">
            <a class="btn-details"
               [routerLink]="['/store/product', product.id]"
               [attr.href]="'/store/product/' + product.id">
              üîç View Details
            </a>
            <button class="btn-cart" (click)="addToCart(product)">üõí Add to Cart</button>
          </div>
        </div>
      }
    </section>
  </div>

  <!-- Pagination controls -->
  <div class="pagination">
    <button (click)="goToPage(currentPage() - 1)" [disabled]="currentPage() === 1">Prev</button>
    @for (page of Array(totalPages()).fill(0); let i = $index; track i) {
      <button (click)="goToPage(i+1)" [class.active]="currentPage() === i+1">{{ i+1 }}</button>
    }
    <button (click)="goToPage(currentPage() + 1)" [disabled]="currentPage() === totalPages()">Next</button>
  </div>
</div>
